%!PS-Adobe-2.0
%%Creator: dvipsk 5.58f Copyright 1986, 1994 Radical Eye Software
%%Title: filesys.dvi
%%Pages: 4
%%PageOrder: Ascend
%%BoundingBox: 0 0 612 792
%%EndComments
%DVIPSCommandLine: dvips -o filesys.ps filesys.dvi
%DVIPSParameters: dpi=300, comments removed
%DVIPSSource:  TeX output 1995.09.06:1530
%%BeginProcSet: tex.pro
/TeXDict 250 dict def TeXDict begin /N{def}def /B{bind def}N /S{exch}N
/X{S N}B /TR{translate}N /isls false N /vsize 11 72 mul N /hsize 8.5 72
mul N /landplus90{false}def /@rigin{isls{[0 landplus90{1 -1}{-1 1}
ifelse 0 0 0]concat}if 72 Resolution div 72 VResolution div neg scale
isls{landplus90{VResolution 72 div vsize mul 0 exch}{Resolution -72 div
hsize mul 0}ifelse TR}if Resolution VResolution vsize -72 div 1 add mul
TR[matrix currentmatrix{dup dup round sub abs 0.00001 lt{round}if}
forall round exch round exch]setmatrix}N /@landscape{/isls true N}B
/@manualfeed{statusdict /manualfeed true put}B /@copies{/#copies X}B
/FMat[1 0 0 -1 0 0]N /FBB[0 0 0 0]N /nn 0 N /IE 0 N /ctr 0 N /df-tail{
/nn 8 dict N nn begin /FontType 3 N /FontMatrix fntrx N /FontBBox FBB N
string /base X array /BitMaps X /BuildChar{CharBuilder}N /Encoding IE N
end dup{/foo setfont}2 array copy cvx N load 0 nn put /ctr 0 N[}B /df{
/sf 1 N /fntrx FMat N df-tail}B /dfs{div /sf X /fntrx[sf 0 0 sf neg 0 0]
N df-tail}B /E{pop nn dup definefont setfont}B /ch-width{ch-data dup
length 5 sub get}B /ch-height{ch-data dup length 4 sub get}B /ch-xoff{
128 ch-data dup length 3 sub get sub}B /ch-yoff{ch-data dup length 2 sub
get 127 sub}B /ch-dx{ch-data dup length 1 sub get}B /ch-image{ch-data
dup type /stringtype ne{ctr get /ctr ctr 1 add N}if}B /id 0 N /rw 0 N
/rc 0 N /gp 0 N /cp 0 N /G 0 N /sf 0 N /CharBuilder{save 3 1 roll S dup
/base get 2 index get S /BitMaps get S get /ch-data X pop /ctr 0 N ch-dx
0 ch-xoff ch-yoff ch-height sub ch-xoff ch-width add ch-yoff
setcachedevice ch-width ch-height true[1 0 0 -1 -.1 ch-xoff sub ch-yoff
.1 sub]{ch-image}imagemask restore}B /D{/cc X dup type /stringtype ne{]}
if nn /base get cc ctr put nn /BitMaps get S ctr S sf 1 ne{dup dup
length 1 sub dup 2 index S get sf div put}if put /ctr ctr 1 add N}B /I{
cc 1 add D}B /bop{userdict /bop-hook known{bop-hook}if /SI save N @rigin
0 0 moveto /V matrix currentmatrix dup 1 get dup mul exch 0 get dup mul
add .99 lt{/QV}{/RV}ifelse load def pop pop}N /eop{SI restore showpage
userdict /eop-hook known{eop-hook}if}N /@start{userdict /start-hook
known{start-hook}if pop /VResolution X /Resolution X 1000 div /DVImag X
/IE 256 array N 0 1 255{IE S 1 string dup 0 3 index put cvn put}for
65781.76 div /vsize X 65781.76 div /hsize X}N /p{show}N /RMat[1 0 0 -1 0
0]N /BDot 260 string N /rulex 0 N /ruley 0 N /v{/ruley X /rulex X V}B /V
{}B /RV statusdict begin /product where{pop product dup length 7 ge{0 7
getinterval dup(Display)eq exch 0 4 getinterval(NeXT)eq or}{pop false}
ifelse}{false}ifelse end{{gsave TR -.1 .1 TR 1 1 scale rulex ruley false
RMat{BDot}imagemask grestore}}{{gsave TR -.1 .1 TR rulex ruley scale 1 1
false RMat{BDot}imagemask grestore}}ifelse B /QV{gsave newpath transform
round exch round exch itransform moveto rulex 0 rlineto 0 ruley neg
rlineto rulex neg 0 rlineto fill grestore}B /a{moveto}B /delta 0 N /tail
{dup /delta X 0 rmoveto}B /M{S p delta add tail}B /b{S p tail}B /c{-4 M}
B /d{-3 M}B /e{-2 M}B /f{-1 M}B /g{0 M}B /h{1 M}B /i{2 M}B /j{3 M}B /k{
4 M}B /w{0 rmoveto}B /l{p -4 w}B /m{p -3 w}B /n{p -2 w}B /o{p -1 w}B /q{
p 1 w}B /r{p 2 w}B /s{p 3 w}B /t{p 4 w}B /x{0 S rmoveto}B /y{3 2 roll p
a}B /bos{/SS save N}B /eos{SS restore}B end
%%EndProcSet
TeXDict begin 40258437 52099154 1000 300 300 (filesys.dvi)
@start /Fa 6 118 df<1C1E0780266318C04683A0E04703C0E08E0380E08E0380E00E03
80E00E0380E01C0701C01C0701C01C0701C01C070380380E0388380E0388380E0708380E
0710701C0320300C01C01D127C9122>109 D<383E004CC3004D03804E03809E03809C03
801C03801C0380380700380700380700380E00700E40700E40701C40701C80E00C806007
0012127C9117>I<00F800030C000E06001C0300180300300300700380700380E00700E0
0700E00700E00E00E00E00E01C0060180060300030E0000F800011127C9115>I<01F006
080C080C1C18181C001F001FC00FF007F0007800386030E030C030806060C01F000E127D
9111>115 D<03000700070007000E000E000E000E00FFE01C001C001C00380038003800
38007000700070007000E080E080E100E100660038000B1A7C990E>I<1C01802E03804E
03804E03808E07008E07001C07001C0700380E00380E00380E00380E00301C80301C8030
1C80383C80184D000F860011127C9116>I E /Fb 74 125 df<007E1F0001C1B1800303
E3C00703C3C00E03C1800E01C0000E01C0000E01C0000E01C0000E01C0000E01C000FFFF
FC000E01C0000E01C0000E01C0000E01C0000E01C0000E01C0000E01C0000E01C0000E01
C0000E01C0000E01C0000E01C0000E01C0000E01C0000E01C0000E01C0007F87FC001A1D
809C18>11 D<007E0001C1800301800703C00E03C00E01800E00000E00000E00000E0000
0E0000FFFFC00E01C00E01C00E01C00E01C00E01C00E01C00E01C00E01C00E01C00E01C0
0E01C00E01C00E01C00E01C00E01C00E01C07F87F8151D809C17>I<007FC001C1C00303
C00703C00E01C00E01C00E01C00E01C00E01C00E01C00E01C0FFFFC00E01C00E01C00E01
C00E01C00E01C00E01C00E01C00E01C00E01C00E01C00E01C00E01C00E01C00E01C00E01
C00E01C07FCFF8151D809C17>I<6060F0F0F8F868680808080808081010101020204040
80800D0C7F9C15>34 D<0F0000C0188000C030600380703807006027FB00E0100600E010
0C00E0100C00E0101800E0101800E0103000E0106000602060007020C000304180001881
80000F0303C00006062000060C10000C1C08001818080018380400303804006038040060
380400C0380400C03804018038040300180803001C0806000C100C000620040003C01E21
7E9E23>37 D<60F0F8680808081010204080050C7C9C0C>39 D<00800100020006000C00
0C00180018003000300030006000600060006000E000E000E000E000E000E000E000E000
E000E000E000E0006000600060006000300030003000180018000C000C00060002000100
0080092A7C9E10>I<8000400020003000180018000C000C000600060006000300030003
000300038003800380038003800380038003800380038003800380030003000300030006
00060006000C000C00180018003000200040008000092A7E9E10>I<0006000000060000
000600000006000000060000000600000006000000060000000600000006000000060000
0006000000060000FFFFFFE0FFFFFFE00006000000060000000600000006000000060000
00060000000600000006000000060000000600000006000000060000000600001B1C7E97
20>43 D<60F0F0701010101020204080040C7C830C>I<FFE0FFE00B0280890E>I<60F0F0
6004047C830C>I<00010003000600060006000C000C000C001800180018003000300030
0060006000C000C000C0018001800180030003000300060006000C000C000C0018001800
1800300030003000600060006000C000C00010297E9E15>I<03C00C301818300C300C70
0E60066006E007E007E007E007E007E007E007E007E007E007E007E007E0076006600670
0E300C300C18180C3007E0101D7E9B15>I<010007003F00C70007000700070007000700
070007000700070007000700070007000700070007000700070007000700070007000700
FFF80D1C7C9B15>I<07C01830201C400C400EF00FF80FF807F8077007000F000E000E00
1C001C00380070006000C00180030006010C01180110023FFE7FFEFFFE101C7E9B15>I<
07E01830201C201C781E780E781E381E001C001C00180030006007C00030001C001C000E
000F000F700FF80FF80FF80FF00E401C201C183007C0101D7E9B15>I<000C00000C0000
1C00003C00003C00005C0000DC00009C00011C00031C00021C00041C000C1C00081C0010
1C00301C00201C00401C00C01C00FFFFC0001C00001C00001C00001C00001C00001C0000
1C0001FFC0121C7F9B15>I<300C3FF83FF03FC020002000200020002000200023E02C30
3018301C200E000E000F000F000F600FF00FF00FF00F800E401E401C2038187007C0101D
7E9B15>I<00F0030C04040C0E181E301E300C700070006000E3E0E430E818F00CF00EE0
06E007E007E007E007E007600760077006300E300C18180C3003E0101D7E9B15>I<03E0
0C301008200C200660066006700670067C0C3E183FB01FE007F007F818FC307E601E600F
C007C003C003C003C00360026004300C1C1007E0101D7E9B15>56
D<60F0F0600000000000000000000060F0F06004127C910C>58 D<60F0F0600000000000
000000000060F0F0701010101020204080041A7C910C>I<000600000006000000060000
000F0000000F0000000F000000178000001780000037C0000023C0000023C0000043E000
0041E0000041E0000080F0000080F0000080F000010078000100780001FFF80002003C00
02003C0002003C0004001E0004001E000C001F000C000F001E001F00FF00FFF01C1D7F9C
1F>65 D<FFFFC0000F0078000F003C000F001E000F000E000F000F000F000F000F000F00
0F000F000F000E000F001E000F003C000F00F8000FFFF0000F003C000F001E000F000F00
0F0007000F0007800F0007800F0007800F0007800F0007800F000F000F000F000F001E00
0F007800FFFFE000191C7F9B1D>I<001F808000E0618001801980070007800E0003801C
0003801C00018038000180780000807800008070000080F0000000F0000000F0000000F0
000000F0000000F0000000F0000000F0000000700000807800008078000080380000801C
0001001C0001000E000200070004000180080000E03000001FC000191E7E9C1E>I<FFFF
C0000F00F0000F003C000F000E000F0007000F0007000F0003800F0003C00F0001C00F00
01C00F0001E00F0001E00F0001E00F0001E00F0001E00F0001E00F0001E00F0001E00F00
01C00F0001C00F0003C00F0003800F0007800F0007000F000E000F001C000F007000FFFF
C0001B1C7E9B20>I<FFFFFC0F003C0F000C0F00040F00040F00060F00020F00020F0102
0F01000F01000F01000F03000FFF000F03000F01000F01000F01000F01010F00010F0002
0F00020F00020F00060F00060F000C0F003CFFFFFC181C7E9B1C>I<FFFFF80F00780F00
180F00080F00080F000C0F00040F00040F01040F01000F01000F01000F03000FFF000F03
000F01000F01000F01000F01000F00000F00000F00000F00000F00000F00000F00000F00
00FFF800161C7E9B1B>I<001F808000E0618001801980070007800E0003801C0003801C
00018038000180780000807800008070000080F0000000F0000000F0000000F0000000F0
000000F0000000F000FFF0F0000F80700007807800078078000780380007801C0007801C
0007800E00078007000B800180118000E06080001F80001C1E7E9C21>I<FFF0FFF00F00
0F000F000F000F000F000F000F000F000F000F000F000F000F000F000F000F000F000F00
0F000F000F000F000F000FFFFF000F000F000F000F000F000F000F000F000F000F000F00
0F000F000F000F000F000F000F000F000F000F000F000F000F000F000F00FFF0FFF01C1C
7F9B1F>I<FFF00F000F000F000F000F000F000F000F000F000F000F000F000F000F000F
000F000F000F000F000F000F000F000F000F000F000F00FFF00C1C7F9B0F>I<FFF01FE0
0F0007800F0006000F0004000F0008000F0010000F0020000F0040000F0080000F010000
0F0200000F0600000F0F00000F1780000F2780000F43C0000F81E0000F01E0000F00F000
0F0078000F0078000F003C000F003E000F001E000F000F000F000F800F000FC0FFF03FF0
1C1C7F9B20>75 D<FFF8000F80000F00000F00000F00000F00000F00000F00000F00000F
00000F00000F00000F00000F00000F00000F00000F00000F00000F00080F00080F00080F
00180F00180F00100F00300F00700F01F0FFFFF0151C7E9B1A>I<FF8000FF800F8000F8
000F8000F8000BC00178000BC00178000BC001780009E002780009E002780008F0047800
08F004780008F0047800087808780008780878000878087800083C107800083C10780008
3C107800081E207800081E207800081E207800080F407800080F40780008078078000807
807800080780780008030078001C03007800FF8307FF80211C7E9B26>I<FF001FF00F80
03800FC001000BC0010009E0010008F0010008F0010008780100083C0100083E0100081E
0100080F0100080F8100080781000803C1000801E1000801F1000800F100080079000800
7D0008003D0008001F0008001F0008000F0008000700080003001C000300FF8001001C1C
7F9B1F>I<003F800000E0E0000380380007001C000E000E001C0007003C000780380003
80780003C0780003C0700001C0F00001E0F00001E0F00001E0F00001E0F00001E0F00001
E0F00001E0F00001E0700001C0780003C0780003C0380003803C0007801C0007000E000E
0007001C000380380000E0E000003F80001B1E7E9C20>I<FFFF00000F01E0000F007800
0F003C000F001C000F001E000F001E000F001E000F001E000F001C000F003C000F007800
0F01E0000FFF00000F01E0000F0070000F0078000F003C000F003C000F003C000F003C00
0F003C000F003C000F003C100F003C100F001C100F001C10FFF00E20000003C01C1D7E9B
1F>82 D<07E0801C1980300580300380600180E00180E00080E00080E00080F00000F800
007C00007FC0003FF8001FFE0007FF0000FF80000F800007C00003C00001C08001C08001
C08001C0C00180C00180E00300D00200CC0C0083F800121E7E9C17>I<7FFFFFC0700F01
C0600F00C0400F0040400F0040C00F0020800F0020800F0020800F0020000F0000000F00
00000F0000000F0000000F0000000F0000000F0000000F0000000F0000000F0000000F00
00000F0000000F0000000F0000000F0000000F0000000F0000001F800003FFFC001B1C7F
9B1E>I<FFF01FF00F0003800F0001000F0001000F0001000F0001000F0001000F000100
0F0001000F0001000F0001000F0001000F0001000F0001000F0001000F0001000F000100
0F0001000F0001000F0001000F0001000F00010007000200078002000380040001C00400
00E0180000706000000F80001C1D7F9B1F>I<FFE1FFC0FF1F003E003C1E003C00180F00
1E00100F001E00100F001E001007801F002007801F002007801F002003C027804003C027
804003C027804001E043C08001E043C08001E043C08000F081E10000F081E10000F081E1
0000F900F300007900F200007900F200007E007E00003E007C00003E007C00003C003C00
001C003800001C00380000180018000008001000281D7F9B2B>87
D<FFF07FC00FC01E0007800C0007C0080003C0100001E0200001F0200000F04000007880
00007C8000003D0000003E0000001F0000000F0000000F8000000F80000013C0000023E0
000021E0000040F0000080F8000080780001007C0002003E0002001E0006001F001F001F
80FF807FF01C1C7F9B1F>I<FFF003FC0F8001E0078000C007C0008003C0010003E00300
01E0020000F0040000F8040000780800007C1800003C1000003E2000001F2000000F4000
000FC0000007800000078000000780000007800000078000000780000007800000078000
000780000007800000078000007FF8001E1C809B1F>I<08081010202040404040808080
808080B0B0F8F8787830300D0C7A9C15>92 D<0810204040808080B0F87830050C7D9C0C
>96 D<1FC000307000783800781C00301C00001C00001C0001FC000F1C00381C00701C00
601C00E01C40E01C40E01C40603C40304E801F870012127E9115>I<FC00001C00001C00
001C00001C00001C00001C00001C00001C00001C00001C00001C7C001D87001E01801C00
C01C00E01C00601C00701C00701C00701C00701C00701C00701C00601C00E01C00C01E01
8019070010FC00141D7F9C17>I<03F80C0C181E301E700C6000E000E000E000E000E000
E00060007002300218040C1803E00F127F9112>I<001F80000380000380000380000380
00038000038000038000038000038000038003F3800E0B80180780300380700380600380
E00380E00380E00380E00380E00380E003806003807003803003801807800E1B8003E3F0
141D7F9C17>I<07E00C301818300C700E6006E006FFFEE000E000E000E0006000700230
0218040C1803E00F127F9112>I<00F8018C071E061E0E0C0E000E000E000E000E000E00
FFE00E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E007FE0
0F1D809C0D>I<00038007C4C01C78C0383880301800701C00701C00701C00701C003018
003838001C700027C0002000002000003000003FF8001FFF001FFF802003806001C0C000
C0C000C0C000C06001803003001C0E0007F800121C7F9215>I<FC00001C00001C00001C
00001C00001C00001C00001C00001C00001C00001C00001C7C001C87001D03001E03801C
03801C03801C03801C03801C03801C03801C03801C03801C03801C03801C03801C03801C
0380FF9FF0141D7F9C17>I<18003C003C0018000000000000000000000000000000FC00
1C001C001C001C001C001C001C001C001C001C001C001C001C001C001C001C00FF80091D
7F9C0C>I<00C001E001E000C0000000000000000000000000000007E000E000E000E000
E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E060E0F0
C0F1C061803E000B25839C0D>I<FC00001C00001C00001C00001C00001C00001C00001C
00001C00001C00001C00001C0FE01C07801C06001C0C001C10001C20001C40001CE0001D
E0001E70001C78001C38001C3C001C1C001C0E001C0F001C0F80FF9FE0131D7F9C16>I<
FC001C001C001C001C001C001C001C001C001C001C001C001C001C001C001C001C001C00
1C001C001C001C001C001C001C001C001C001C00FF80091D7F9C0C>I<FC7E07E0001C83
8838001D019018001E01E01C001C01C01C001C01C01C001C01C01C001C01C01C001C01C0
1C001C01C01C001C01C01C001C01C01C001C01C01C001C01C01C001C01C01C001C01C01C
001C01C01C00FF8FF8FF8021127F9124>I<FC7C001C87001D03001E03801C03801C0380
1C03801C03801C03801C03801C03801C03801C03801C03801C03801C03801C0380FF9FF0
14127F9117>I<03F0000E1C00180600300300700380600180E001C0E001C0E001C0E001
C0E001C0E001C06001807003803003001806000E1C0003F00012127F9115>I<FC7C001D
87001E01801C01C01C00E01C00E01C00701C00701C00701C00701C00701C00701C00E01C
00E01C01C01E01801D07001CFC001C00001C00001C00001C00001C00001C00001C0000FF
8000141A7F9117>I<03E0800E1980180580380780700380700380E00380E00380E00380
E00380E00380E003807003807003803807801807800E1B8003E380000380000380000380
000380000380000380000380001FF0141A7F9116>I<FCE01D381E781E781C301C001C00
1C001C001C001C001C001C001C001C001C001C00FFC00D127F9110>I<1F9020704030C0
10C010E010F8007F803FE00FF000F880388018C018C018E010D0608FC00D127F9110>I<
04000400040004000C000C001C003C00FFE01C001C001C001C001C001C001C001C001C00
1C101C101C101C101C100C100E2003C00C1A7F9910>I<FC1F801C03801C03801C03801C
03801C03801C03801C03801C03801C03801C03801C03801C03801C03801C07800C07800E
1B8003E3F014127F9117>I<FF07E03C03801C01001C01000E02000E02000F0600070400
07040003880003880003C80001D00001D00000E00000E00000E00000400013127F9116>
I<FF3FC7E03C0703C01C0701801C0701001C0B01000E0B82000E0B82000E1182000711C4
000711C4000720C40003A0E80003A0E80003C0680001C0700001C0700001803000008020
001B127F911E>I<FF0FE01E07001C06000E040007080003900003B00001E00000E00000
F00001F000013800021C00041C000C0E001807003C0780FE1FF014127F9116>I<FF07E0
3C03801C01001C01000E02000E02000F060007040007040003880003880003C80001D000
01D00000E00000E00000E000004000004000008000008000F08000F10000F30000660000
380000131A7F9116>I<7FFC70386038407040F040E041C003C0038007000F040E041C04
3C0C380870087038FFF80E127F9112>I<FFFFF01401808B15>I<FFFFFFFFFF802901808B
2A>I E /Fc 38 122 df<001FC0000070200000C0100001803800038078000700780007
00300007000000070000000700000007000000070000000700000007000000FFFFF80007
007800070038000700380007003800070038000700380007003800070038000700380007
003800070038000700380007003800070038000700380007003800070038000700380007
0038007FE1FF80192380A21B>12 D<0000C018000000C018000000C01800000180300000
018030000001803000000180300000030060000003006000000300600000030060000003
006000000600C000000600C000000600C000000600C000000C018000FFFFFFFFC0FFFFFF
FFC000180300000018030000001803000000180300000030060000003006000000300600
000030060000FFFFFFFFC0FFFFFFFFC000600C000000C018000000C018000000C0180000
00C018000001803000000180300000018030000001803000000300600000030060000003
0060000003006000000600C000000600C000000600C00000222D7DA229>35
D<70F8FCFC7404040404080810102040060F7C840E>44 D<70F8F8F87005057C840E>46
D<01F000071C000C06001803003803803803807001C07001C07001C07001C0F001E0F001
E0F001E0F001E0F001E0F001E0F001E0F001E0F001E0F001E0F001E0F001E0F001E0F001
E07001C07001C07001C07803C03803803803801C07000C0600071C0001F00013227EA018
>48 D<008003800F80F38003800380038003800380038003800380038003800380038003
800380038003800380038003800380038003800380038003800380038007C0FFFE0F217C
A018>I<03F0000C1C001007002007804003C04003C08003E0F003E0F801E0F801E0F801
E02003E00003E00003C00003C0000780000700000E00001C0000180000300000600000C0
000180000100000200200400200800201800603000403FFFC07FFFC0FFFFC013217EA018
>I<000300000300000700000700000F0000170000170000270000670000470000870001
8700010700020700060700040700080700080700100700200700200700400700C00700FF
FFF8000700000700000700000700000700000700000700000F80007FF015217FA018>52
D<1000801E07001FFF001FFE001FF80017E0001000001000001000001000001000001000
0011F800120C001C07001803801003800001C00001C00001E00001E00001E00001E07001
E0F001E0F001E0E001C08001C04003C04003802007001006000C1C0003F00013227EA018
>I<007E0001C1000300800601C00C03C01C03C018018038000038000078000070000070
0000F0F800F30C00F40600F40300F80380F801C0F001C0F001E0F001E0F001E0F001E0F0
01E07001E07001E07001E03801C03801C01803801C03000C0600070C0001F00013227EA0
18>I<01F800060E000803001001802001806000C06000C06000C07000C07000C0780180
3E01003F02001FC4000FF80003F80001FC00067E00083F00100F803007C06003C06000E0
C000E0C00060C00060C00060C000606000406000C03000801803000E0E0003F00013227E
A018>56 D<70F8F8F870000000000000000000000070F8F8F87005157C940E>58
D<0001800000018000000180000003C0000003C0000003C0000005E0000005E0000009F0
000008F0000008F00000107800001078000010780000203C0000203C0000203C0000401E
0000401E0000C01F0000800F0000800F0001FFFF800100078001000780020003C0020003
C0020003C0040001E0040001E0040001E0080000F01C0000F03E0001F8FF800FFF20237E
A225>65 D<FFFFF8000F800E0007800780078003C0078003E0078001E0078001F0078001
F0078001F0078001F0078001F0078001E0078003E0078007C007800F8007803E0007FFFE
0007800780078003C0078001E0078001F0078000F0078000F8078000F8078000F8078000
F8078000F8078000F8078001F0078001F0078003E0078007C00F800F00FFFFFC001D227E
A123>I<0007E0100038183000E0063001C00170038000F0070000F00E0000701E000070
1C0000303C0000303C0000307C0000107800001078000010F8000000F8000000F8000000
F8000000F8000000F8000000F8000000F800000078000000780000107C0000103C000010
3C0000101C0000201E0000200E000040070000400380008001C0010000E0020000381C00
0007E0001C247DA223>I<FFFFF0000F801E000780070007800380078001C0078000E007
8000F007800078078000780780007C0780003C0780003C0780003C0780003E0780003E07
80003E0780003E0780003E0780003E0780003E0780003E0780003E0780003C0780003C07
80007C0780007807800078078000F0078000E0078001E0078003C0078007000F801E00FF
FFF0001F227EA125>I<FF8007FF07C000F807C0007005E0002004F0002004F000200478
0020047C0020043C0020041E0020041F0020040F002004078020040780200403C0200401
E0200401E0200400F0200400F8200400782004003C2004003E2004001E2004000F200400
0F20040007A0040003E0040003E0040001E0040001E0040000E00E0000601F000060FFE0
002020227EA125>78 D<03F0200C0C601802603001E07000E0600060E00060E00060E000
20E00020E00020F00000F000007800007F00003FF0001FFE000FFF0003FF80003FC00007
E00001E00000F00000F0000070800070800070800070800070C00060C00060E000C0F000
C0C80180C6070081FC0014247DA21B>83 D<7FFFFFF87807807860078018400780084007
800840078008C007800C8007800480078004800780048007800400078000000780000007
800000078000000780000007800000078000000780000007800000078000000780000007
800000078000000780000007800000078000000780000007800000078000000780000007
8000000FC00001FFFE001E227EA123>I<1FE000303800780C00780E0030070000070000
070000070000FF0007C7001E07003C0700780700700700F00708F00708F00708F00F0878
17083C23900FC1E015157E9418>97 D<0E0000FE00001E00000E00000E00000E00000E00
000E00000E00000E00000E00000E00000E00000E00000E1F000E61C00E80600F00300E00
380E003C0E001C0E001E0E001E0E001E0E001E0E001E0E001E0E001E0E001C0E003C0E00
380F00700C80600C41C0083F0017237FA21B>I<01FE000703000C07801C078038030078
0000700000F00000F00000F00000F00000F00000F00000F000007000007800403800401C
00800C010007060001F80012157E9416>I<0000E0000FE00001E00000E00000E00000E0
0000E00000E00000E00000E00000E00000E00000E00000E001F8E00704E00C02E01C01E0
3800E07800E07000E0F000E0F000E0F000E0F000E0F000E0F000E0F000E07000E07800E0
3800E01801E00C02E0070CF001F0FE17237EA21B>I<01FC000707000C03801C01C03801
C07801E07000E0F000E0FFFFE0F00000F00000F00000F00000F000007000007800203800
201C00400E008007030000FC0013157F9416>I<00007003F1980E1E181C0E1838070038
07007807807807807807807807803807003807001C0E001E1C0033F00020000020000030
00003800003FFE001FFFC00FFFE03000F0600030C00018C00018C00018C0001860003060
00303800E00E038003FE0015217F9518>103 D<0E0000FE00001E00000E00000E00000E
00000E00000E00000E00000E00000E00000E00000E00000E00000E1F800E60C00E80E00F
00700F00700E00700E00700E00700E00700E00700E00700E00700E00700E00700E00700E
00700E00700E00700E00700E0070FFE7FF18237FA21B>I<1C003E003E003E001C000000
00000000000000000000000000000E007E001E000E000E000E000E000E000E000E000E00
0E000E000E000E000E000E000E000E000E00FFC00A227FA10E>I<0E00FE001E000E000E
000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E
000E000E000E000E000E000E000E000E000E000E000E00FFE00B237FA20E>108
D<0E1FC07F00FE60E183801E807201C00F003C00E00F003C00E00E003800E00E003800E0
0E003800E00E003800E00E003800E00E003800E00E003800E00E003800E00E003800E00E
003800E00E003800E00E003800E00E003800E00E003800E00E003800E0FFE3FF8FFE2715
7F942A>I<0E1F80FE60C01E80E00F00700F00700E00700E00700E00700E00700E00700E
00700E00700E00700E00700E00700E00700E00700E00700E00700E0070FFE7FF18157F94
1B>I<01FC000707000C01801800C03800E0700070700070F00078F00078F00078F00078
F00078F00078F000787000707800F03800E01C01C00E038007070001FC0015157F9418>
I<0E1F00FE61C00E80600F00700E00380E003C0E003C0E001E0E001E0E001E0E001E0E00
1E0E001E0E001E0E003C0E003C0E00380F00700E80E00E41C00E3F000E00000E00000E00
000E00000E00000E00000E00000E00000E0000FFE000171F7F941B>I<0E3CFE461E8F0F
0F0F060F000E000E000E000E000E000E000E000E000E000E000E000E000E000F00FFF010
157F9413>114 D<0F8830786018C018C008C008E008F0007F003FE00FF001F8003C801C
800C800CC00CC008E018D0308FC00E157E9413>I<02000200020002000600060006000E
001E003E00FFFC0E000E000E000E000E000E000E000E000E000E000E000E040E040E040E
040E040E040708030801F00E1F7F9E13>I<0E0070FE07F01E00F00E00700E00700E0070
0E00700E00700E00700E00700E00700E00700E00700E00700E00700E00700E00F00E00F0
06017003827800FC7F18157F941B>I<FF80FE1E00781E00300E00200E00200700400700
400780C003808003808001C10001C10000E20000E20000E2000074000074000038000038
0000380000100017157F941A>I<FF80FE1E00781E00300E00200E002007004007004007
80C003808003808001C10001C10000E20000E20000E20000740000740000380000380000
3800001000001000002000002000002000004000F04000F08000F180004300003C000017
1F7F941A>121 D E end
%%EndProlog
%%BeginSetup
%%Feature: *Resolution 300dpi
TeXDict begin

%%EndSetup
%%Page: 1 1
1 0 bop 513 307 a Fc(Nac)o(hos)16 b(Assignmen)o(t)f(#4:)21
b(Build)15 b(a)i(\014le)e(system)820 425 y(T)l(om)h(Anderson)740
483 y(Computer)g(Science)f(162)500 533 y(Due)h(date:)22
b(Th)o(ursda)o(y)16 b(No)o(v)o(em)o(b)q(er)e(18,)i(5:00)h(p.m.)324
682 y Fb(The)h(m)o(ultiprogramm)n(ing)d(and)j(virtual)f(memory)f
(assignmen)o(ts)h(made)g(use)i(of)f(the)262 732 y(Nac)o(hos)g(\014le)g
(system.)30 b(The)18 b(fourth)g(phase)g(of)g(Nac)o(hos)g(is)g(to)f
(actually)h(build)f(this)h(\014le)262 782 y(system.)f(As)12
b(in)g(the)h(\014rst)g(t)o(w)o(o)e(assignmen)o(ts,)h(w)o(e)g(giv)o(e)f
(y)o(ou)h(some)f(of)h(the)h(co)q(de)f(y)o(ou)g(need;)262
832 y(y)o(our)h(job)h(is)f(to)h(complete)f(the)i(\014le)f(system)f(and)
h(enhance)h(it.)324 882 y(The)20 b(\014rst)g(step)h(is)f(to)f(read)h
(and)g(understand)h(the)f(partial)f(\014le)g(system)h(w)o(e)g(ha)o(v)o
(e)262 931 y(written)15 b(for)f(y)o(ou.)21 b(Run)14 b(the)h(program)f
(`nac)o(hos)g(-f)h(-cp)g(test/small)e(small')f(for)j(a)f(simple)262
981 y(test)h(case)g(of)f(our)g(co)q(de)h({)f(`-f)s(')f(formats)f(the)j
(em)o(ulated)e(ph)o(ysical)h(disk,)f(and)h(`-cp')g(copies)262
1031 y(the)g(UNIX)g(\014le)g(`test/small')e(on)o(to)h(that)h(disk.)324
1081 y(The)g(\014les)g(to)g(fo)q(cus)g(on)g(are:)282
1170 y(fstest.cc)i(|)d(a)h(simple)e(test)j(case)g(for)e(our)h(\014le)g
(system.)282 1252 y(\014lesys.h,)g(\014lesys.cc)h(|)e(top-lev)o(el)h
(in)o(terface)g(to)g(the)g(\014le)g(system.)282 1334
y(directory)m(.h,)f(directory)m(.cc)h(|)e(translates)i(\014le)g(names)e
(to)h(disk)g(\014le)g(headers;)h(the)g(direc-)365 1384
y(tory)g(data)g(structure)i(is)e(stored)g(as)g(a)g(\014le.)282
1466 y(\014lehdr.h,)f(\014lehdr.cc)h(|)e(manages)g(the)i(data)e
(structure)j(represen)o(ting)g(the)f(la)o(y)o(out)d(of)i(a)365
1516 y(\014le's)h(data)g(on)f(disk.)282 1598 y(op)q(en\014le.h,)k(op)q
(en\014le.cc)h(|)f(translates)g(\014le)g(reads)h(and)f(writes)g(to)g
(disk)g(sector)h(reads)365 1648 y(and)c(writes.)282 1730
y(sync)o(hdisk.h,)g(sync)o(hdisk.cc)g(|)f(pro)o(vides)h(sync)o(hronous)
g(access)h(to)f(the)g(async)o(hronous)365 1780 y(ph)o(ysical)g(disk,)f
(so)h(that)g(threads)h(blo)q(c)o(k)e(un)o(til)g(their)i(requests)g(ha)o
(v)o(e)f(completed.)282 1862 y(disk.h,)k(disk.cc)f(|)g(em)o(ulates)g(a)
g(ph)o(ysical)g(disk,)h(b)o(y)f(sending)h(requests)h(to)f(read)g(and)
365 1912 y(write)g(disk)f(blo)q(c)o(ks)g(to)g(a)f(UNIX)i(\014le)f(and)g
(then)g(generating)h(an)f(in)o(terrupt)g(after)365 1962
y(some)c(p)q(erio)q(d)i(of)e(time.)k(The)d(details)g(of)f(ho)o(w)h(to)g
(mak)o(e)e(read)j(and)e(write)i(requests)365 2011 y(v)n(aries)c
(tremendously)f(from)f(disk)i(device)g(to)g(disk)f(device;)i(in)e
(practice,)i(y)o(ou)e(w)o(ould)365 2061 y(w)o(an)o(t)j(to)g(hide)g
(these)h(details)f(b)q(ehind)g(something)f(lik)o(e)g(the)i(abstraction)
f(pro)o(vided)365 2111 y(b)o(y)h(this)g(mo)q(dule.)324
2200 y(Our)g(\014le)f(system)h(has)f(a)h(UNIX-lik)o(e)e(in)o(terface,)i
(so)g(y)o(ou)f(ma)o(y)e(also)i(wish)h(to)f(read)h(the)262
2250 y(UNIX)e(man)e(pages)i(for)g(creat,)h(op)q(en,)f(close,)g(read,)h
(write,)f(lseek,)g(and)g(unlink)f(\(e.g.,)g(t)o(yp)q(e)262
2300 y(\\man)i(creat"\).)24 b(Our)16 b(\014le)g(system)f(has)h(calls)f
(that)h(are)g(similar)d(\(but)j Fa(not)g Fb(iden)o(tical\))f(to)262
2350 y(these;)i(the)g(\014le)f(system)g(translates)g(these)i(calls)d
(in)o(to)g(ph)o(ysical)h(disk)f(op)q(erations.)25 b(One)262
2399 y(ma)r(jor)15 b(di\013erence)k(is)d(that)h(our)g(\014le)g(system)g
(is)g(implem)o(en)o(ted)e(in)i(C++.)27 b(Create)18 b(\(lik)o(e)262
2449 y(UNIX)12 b(creat\),)i(Op)q(en)f(\(op)q(en\),)g(and)f(Remo)o(v)o
(e)f(\(unlink\))h(are)h(de\014ned)g(on)f(the)i(FileSystem)967
2574 y(1)p eop
%%Page: 2 2
2 1 bop 262 307 a Fb(ob)r(ject,)22 b(since)f(they)f(in)o(v)o(olv)o(e)f
(manipulating)e(\014le)j(names)g(and)g(directories.)38
b(FileSys-)262 357 y(tem::Op)q(en)17 b(returns)k(a)d(p)q(oin)o(ter)h
(to)f(an)h(Op)q(enFile)g(ob)r(ject,)h(whic)o(h)e(is)h(used)g(for)g
(direct)262 407 y(\014le)14 b(op)q(erations)g(suc)o(h)h(as)f(Seek)h
(\(lseek\),)f(Read)g(\(read\),)g(W)m(rite)g(\(write\).)19
b(An)14 b(op)q(en)h(\014le)f(is)262 457 y(\\closed")f(b)o(y)h(deleting)
g(the)g(Op)q(enFile)h(ob)r(ject.)324 506 y(Man)o(y)h(of)f(the)i(data)f
(structures)j(in)d(our)g(\014le)h(system)f(are)g(stored)i(b)q(oth)e(in)
g(memory)262 556 y(and)k(on)g(disk.)39 b(T)m(o)19 b(pro)o(vide)i(some)f
(uniformit)o(y)m(,)e(all)i(these)i(data)e(structures)j(ha)o(v)o(e)e(a)
262 606 y(\\F)m(etc)o(hF)m(rom")15 b(pro)q(cedure)20
b(that)d(reads)i(the)f(data)f(o\013)h(disk)f(and)h(in)o(to)e(memory)m
(,)f(and)j(a)262 656 y(\\W)m(riteBac)o(k")g(pro)q(cedure)j(that)e
(stores)h(the)g(data)f(bac)o(k)g(to)g(disk.)33 b(Note)19
b(that)g(the)h(in)262 706 y(memory)11 b(and)j(on)f(disk)h(represen)o
(tations)i(do)d(not)h(ha)o(v)o(e)g(to)g(b)q(e)g(iden)o(tical.)324
756 y(While)e(our)h(co)q(de)g(implemen)o(ts)d(all)i(the)h(ma)r(jor)e
(pieces)j(of)f(a)f(\014le)h(system,)f(it)h(has)f(some)262
805 y(limitati)o(ons.)19 b(Y)m(our)14 b(job)h(will)e(b)q(e)j(to)f
(\014x)g(these)h(limitations.)i(Keep)f(in)d(mind)f(that)i(there)262
855 y(are,)i(of)f(course,)j(in)o(teractions)e(b)q(et)o(w)o(een)h(the)g
(v)n(arious)e(parts)i(of)e(this)h(assignmen)o(t.)26 b(F)m(or)262
905 y(instance,)17 b(ho)o(w)e(y)o(ou)h(c)o(ho)q(ose)h(to)f(implemen)o
(t)d(large)j(\014les)h(ma)o(y)d(a\013ect)j(the)g(p)q(erformance)262
955 y(of)c(y)o(our)g(system)h(for)g(part)g(4.)324 1005
y(The)g(assignmen)o(t)f(is)h(to)f(do)h(items)f(1,)g(2,)g(and)h(3.)282
1096 y(1.)k(Complete)12 b(the)i(basic)g(\014le)f(system)h(b)o(y)f
(adding)f(sync)o(hronization)i(to)f(allo)o(w)f(m)o(ultiple)365
1146 y(threads)19 b(to)e(use)i(\014le)e(system)h(concurren)o(tly)m(.)30
b(Curren)o(tly)m(,)18 b(the)g(\014le)f(system)h(co)q(de)365
1196 y(assumes)12 b(it)f(is)g(accessed)j(b)o(y)d(a)g(single)g(thread)h
(at)f(a)g(time.)16 b(In)c(addition)e(to)h(ensuring)365
1245 y(that)j(in)o(ternal)f(data)g(structures)j(are)f(not)e(corrupted,)
i(y)o(our)e(mo)q(di\014ed)f(\014le)i(system)365 1295
y(m)o(ust)f(observ)o(e)i(the)g(follo)o(wing)c(constrain)o(ts)j(\(these)
i(are)e(the)h(same)e(as)h(in)f(UNIX\):)386 1386 y(The)e(same)e(\014le)h
(ma)o(y)f(b)q(e)h(read/written)i(b)o(y)e(more)f(than)h(one)g(thread)h
(concurren)o(tly)m(.)457 1436 y(Eac)o(h)k(thread)h(separately)g(op)q
(ens)g(the)f(\014le,)g(giving)f(it)h(its)g(o)o(wn)g(priv)n(ate)f(seek)
457 1486 y(p)q(osition)c(within)g(the)h(\014le.)17 b(Th)o(us,)12
b(t)o(w)o(o)e(threads)i(can)f(b)q(oth)g(sequen)o(tially)f(read)457
1536 y(through)k(the)g(same)f(\014le)h(without)f(in)o(terfering)h(with)
g(one)g(another.)386 1602 y(All)e(\014le)i(system)e(op)q(erations)i(m)o
(ust)e(b)q(e)i(atomic)d(and)i(serializable.)18 b(F)m(or)12
b(example,)457 1652 y(if)j(one)i(thread)g(is)g(in)f(the)h(middle)d(of)i
(a)h(\014le)f(write,)h(a)f(thread)h(concurren)o(tly)457
1702 y(reading)11 b(the)h(\014le)g(will)e(see)j(either)g(all)d(of)h
(the)i(c)o(hange)f(or)f(none)h(of)f(it.)17 b(F)m(urther,)457
1752 y(if)i(the)i(Op)q(enFile::W)m(rite)e(op)q(eration)h(\014nishes)h
(b)q(efore)g(the)g(call)e(to)h(Op)q(en-)457 1802 y(File::Read)14
b(is)j(started,)g(the)g(Read)f Fa(must)h Fb(re\015ect)h(the)f(mo)q
(di\014ed)e(v)o(ersion)h(of)457 1851 y(the)e(\014le.)386
1918 y(When)i(a)f(\014le)g(is)h(deleted,)g(threads)g(with)g(the)g
(\014le)f(already)g(op)q(en)h(ma)o(y)d(con)o(tin)o(ue)457
1968 y(to)18 b(read)h(and)f(write)h(the)h(\014le)e(un)o(til)g(they)h
(close)g(the)g(\014le.)32 b(Deleting)18 b(a)h(\014le)457
2017 y(\(FileSystem::Remo)n(v)o(e\))c(m)o(ust)h(prev)o(en)o(t)j
(further)f(op)q(ens)h(on)e(that)g(\014le,)h(but)457 2067
y(the)12 b(disk)g(blo)q(c)o(ks)g(for)g(the)h(\014le)f(cannot)g(b)q(e)h
(reclaimed)e(un)o(til)g(the)i(\014le)f(has)g(b)q(een)457
2117 y(closed)i(b)o(y)g(all)e(threads)j(that)f(curren)o(tly)h(ha)o(v)o
(e)f(the)g(\014le)g(op)q(en.)365 2208 y(Hin)o(t:)k(to)12
b(do)h(this)g(part,)g(y)o(ou)g(will)e(probably)h(\014nd)i(y)o(ou)e
(need)i(to)f(main)o(tain)d(a)j(table)365 2258 y(of)h(op)q(en)g
(\014les.)282 2341 y(2.)26 b(Mo)q(dify)15 b(the)i(\014le)f(system)h(to)
f(allo)o(w)f(the)i(maxim)n(um)12 b(size)17 b(of)f(a)g(\014le)g(to)g(b)q
(e)h(as)g(large)365 2391 y(as)e(the)g(disk)f(\(128Kb)o(ytes\).)21
b(In)14 b(the)h(basic)g(\014le)f(system,)g(eac)o(h)h(\014le)g(is)f
(limited)f(to)h(a)365 2441 y(\014le)i(size)g(of)e(just)i(under)g(4Kb)o
(ytes.)23 b(Eac)o(h)15 b(\014le)g(has)h(a)f(header)h(\(class)g
(FileHeader\))967 2574 y(2)p eop
%%Page: 3 3
3 2 bop 365 307 a Fb(that)14 b(is)f(a)h(table)f(of)g(direct)i(p)q(oin)o
(ters)f(to)g(the)g(disk)f(blo)q(c)o(ks)h(for)f(that)h(\014le.)k(Since)c
(the)365 357 y(header)f(is)e(stored)i(in)e(one)h(disk)f(sector,)i(the)f
(maxim)o(um)7 b(size)12 b(of)f(a)g(\014le)h(is)f(limited)f(b)o(y)365
407 y(the)j(n)o(um)o(b)q(er)e(of)g(p)q(oin)o(ters)i(that)f(will)e
(\014t)i(in)g(one)g(disk)g(sector.)18 b(Increasing)13
b(the)f(limit)365 457 y(to)i(128KBytes)g(will)f(probably)g(but)h(not)f
(necessarily)i(require)g(y)o(ou)e(to)g(implemen)o(t)365
506 y(doubly)h(indirect)g(blo)q(c)o(ks.)282 589 y(3.)19
b(Implemen)o(t)12 b(extensible)j(\014les.)k(In)14 b(the)h(basic)f
(\014le)h(system,)e(the)i(\014le)f(size)h(is)f(sp)q(eci\014ed)365
639 y(when)19 b(the)h(\014le)e(is)h(created.)34 b(One)19
b(adv)n(an)o(tage)f(of)g(this)h(is)f(that)h(the)g(FileHeader)365
689 y(data)13 b(structure,)i(once)f(created,)h(nev)o(er)f(c)o(hanges.)
19 b(In)13 b(UNIX)g(and)h(most)e(other)i(\014le)365 739
y(systems,)h(a)g(\014le)g(is)g(initially)d(created)17
b(with)d(size)i(0)f(and)g(is)f(then)i(expanded)g(ev)o(ery)365
789 y(time)11 b(a)g(write)h(is)g(made)e(o\013)i(the)g(end)h(of)e(the)h
(\014le.)17 b(Mo)q(dify)11 b(the)h(\014le)g(system)g(to)f(allo)o(w)365
839 y(this;)i(as)f(one)g(test)i(case,)f(allo)o(w)d(the)j(directory)g
(\014le)f(to)g(expand)h(b)q(ey)o(ond)f(its)g(curren)o(t)365
888 y(limit)i(of)h(ten)i(\014les.)25 b(In)16 b(doing)f(this)i(part,)f
(b)q(e)h(careful)f(that)g(concurren)o(t)i(accesses)365
938 y(to)c(the)h(\014le)e(header)i(remain)e(prop)q(erly)h(sync)o
(hronized.)282 1021 y(4.)24 b(Impro)o(v)o(e)15 b(the)h(p)q(erformance)g
(of)f(y)o(our)h(\014le)g(system.)24 b(Recompile)14 b(Nac)o(hos)i(with)g
(the)365 1071 y(-DREALISM)11 b(\015ag,)f(and)h(use)h(as)f(y)o(our)g(p)q
(erformance)g(metric)f(the)i(n)o(um)o(b)q(er)e(of)g(tic)o(ks)365
1121 y(needed)19 b(to)e(run)h(\(i\))f(the)h(test)g(case)h(in)e
(test4.cc)h(\(run)g(`nac)o(hos)f(-t'\))g(and)g(\(ii\))g(the)365
1171 y(virtual)c(memory)d(b)q(enc)o(hmark)j(in)g(assignmen)o(t)f(3)g
(\(using)h(the)h(Nac)o(hos)g(\014le)f(system)365 1220
y(no)o(w)k(in)f(place)h(of)f(UNIX\).)h(The)g(test)h(case)g(in)e
(test4.cc)i(sequen)o(tially)e(reads)i(and)365 1270 y(writes)d(a)e
(large)h(\014le.)365 1337 y(Here)e(are)g(a)e(couple)h(of)g(approac)o
(hes)g(y)o(ou)g(migh)o(t)d(tak)o(e)j(to)g(impro)o(ving)d(p)q
(erformance:)386 1428 y(Optimize)k(disk)h(seek)h(and)e(rotational)g
(latency)m(.)17 b(T)m(o)12 b(read)i(or)e(write)h(a)g(sector,)h(the)457
1478 y(disk)h(head)h(m)o(ust)f(b)q(e)i(mo)o(v)o(ed)d(to)i(the)g
(correct)i(trac)o(k)e(and)g(then)g(the)h(system)457 1528
y(m)o(ust)f(w)o(ait)g(for)h(the)h(correct)h(sector)g(to)e(rotate)g
(under)h(the)g(disk)f(head.)29 b(In)457 1577 y(disk-b)q(ound)10
b(systems,)h(these)h(dela)o(ys)f(can)f(b)q(e)i(a)e(cause)i(of)d(p)q(o)q
(or)i(p)q(erformance.)457 1627 y(This)j(can)g(b)q(e)h(\014xed)f(b)o(y)g
(\(i\))g(la)o(ying)f(disk)g(blo)q(c)o(ks)i(from)d(the)j(same)e(\014le)h
(on)g(the)457 1677 y(same)h(trac)o(k)i(\(cf.)26 b(article)16
b(b)o(y)h(McKusic)o(k)g(et)g(al.\))25 b(and)16 b(\(ii\))g(when)h(m)o
(ultiple)457 1727 y(requests)i(are)f(queued)h(for)e(the)h(disk,)g(sc)o
(heduling)g(\014rst)g(those)h(that)e(w)o(ould)457 1777
y(ha)o(v)o(e)e(the)i(shortest)g(dela)o(y)m(,)e(while)h(at)f(the)i(same)
e(time)f(a)o(v)o(oiding)g(starv)n(ation)457 1826 y(of)f(disk)h
(requests.)386 1893 y(Mo)q(dify)j(the)h(\014le)f(system)h(to)f(k)o(eep)
h(a)f(cac)o(he)i(of)e(\014le)g(blo)q(c)o(ks.)29 b(When)18
b(a)f(request)457 1943 y(is)i(made)f(to)h(read)g(a)g(blo)q(c)o(k,)h(c)o
(hec)o(k)g(to)f(see)h(if)f(it)f(is)h(stored)i(in)d(the)i(cac)o(he,)457
1993 y(and)14 b(if)g(so,)h(no)g(disk)g(access)h(is)f(needed)h(since)g
(a)f(cop)o(y)f(can)i(b)q(e)f(returned)i(im-)457 2042
y(mediately)m(.)k(One)c(enhancemen)o(t)f(is)f(that)h(instead)g(of)f
(alw)o(a)o(ys)g(immediately)457 2092 y(writing)f(mo)q(di\014ed)f(data)h
(to)h(disk,)f(dirt)o(y)h(blo)q(c)o(ks)g(can)g(b)q(e)g(k)o(ept)g(in)f
(the)i(cac)o(he)457 2142 y(and)c(written)i(out)f(sometime)d(later)j(|)g
(this)g(is)f(called)h(\\write-b)q(ehind".)18 b(An-)457
2192 y(other)d(enhancemen)o(t)h(is)f(to)g(automatically)d(fetc)o(h)j
(the)h(next)g(blo)q(c)o(k)e(of)h(a)g(\014le)457 2242
y(in)o(to)e(the)i(cac)o(he,)g(when)g(one)f(blo)q(c)o(k)g(of)g(a)g
(\014le)g(is)g(read,)g(in)g(case)i(that)e(blo)q(c)o(k)g(is)457
2291 y(ab)q(out)f(to)h(b)q(e)h(read)f(|)f(this)h(is)g(called)g
(\\read-ahead.")457 2350 y(Y)m(ou)e(are)h(limited)e(to)h(a)h(cac)o(he)g
(that)g(is)g(64)f(disk)h(sectors)h(in)f(size)g(\(roughly)f(6\045)457
2399 y(of)f(the)h(size)h(of)e(the)h(disk\);)g(this)g(space)h(limit)c(m)
o(ust)i(include)g(the)i(memory)c(y)o(ou)457 2449 y(use)14
b(for)g(op)q(en)g(\014les,)g(the)g(bitmap,)e(etc.,)i(if)f(y)o(ou)g(k)o
(eep)i(those)g(in)e(memory)m(.)967 2574 y(3)p eop
%%Page: 4 4
4 3 bop 365 307 a Fb(F)m(or)10 b(eac)o(h)h(of)e(these)j(y)o(ou)e
(implem)o(en)o(t,)e(explain)i(what)g(y)o(ou)f(exp)q(ect)j(the)f(p)q
(erformance)365 357 y(impro)o(v)o(emen)o(t)c(to)j(b)q(e)g(on)g(the)g(b)
q(enc)o(hmarks,)g(and)g(wh)o(y)f(the)i(other)f(alternativ)o(es)g(\(the)
365 407 y(ones)k(y)o(ou)g(did)f(not)g(implemen)o(t\))e(w)o(ould)i
(yield)g(few)o(er)h(p)q(erformance)g(gains)f(for)g(the)365
457 y(same)g(e\013ort.)282 540 y(5.)20 b(Implemen)o(t)12
b(a)i(hierarc)o(hical)h(name)e(space.)21 b(In)15 b(the)g(basic)g
(\014le)f(system,)g(all)f(\014les)i(liv)o(e)365 589 y(in)c(a)g(single)g
(directory;)h(mo)q(dify)d(this)i(to)g(allo)o(w)e(directories)k(to)e(p)q
(oin)o(t)f(to)h(either)h(\014les)365 639 y(or)g(other)g(directories.)18
b(T)m(o)11 b(do)g(this)g(y)o(ou)g(will)f(need)j(routines)f(to)f(parse)h
(path)f(names)365 689 y(in)o(to)j(the)i(sequence)h(of)d(directories)i
(where)g(to)f(\014nd)g(the)g(\014le.)21 b(Y)m(ou)14 b(will)f(also)i
(need)365 739 y(to)j(implem)o(en)o(t)d(routines)j(to)f(c)o(hange)h(the)
g(curren)o(t)h(w)o(orking)d(directory)i(\(cf.)29 b(the)365
789 y(UNIX)15 b(`cd')e(command\))e(and)j(to)g(prin)o(t)f(the)i(con)o
(ten)o(ts)g(of)e(the)i(curren)o(t)g(directory)m(.)365
855 y(F)m(or)c(p)q(erformance,)g(allo)o(w)e(concurren)o(t)j(up)q(dates)
g(to)f(di\013eren)o(t)h(directories,)g(but)f(use)365
905 y(m)o(utual)f(ensure)j(that)f(up)q(dates)h(to)e(the)h(same)f
(directory)h(directory)h(are)f(p)q(erformed)365 955 y(atomically)f
(\(for)j(example,)e(to)i(ensure)h(that)f(a)g(\014le)g(is)f(deleted)i
(only)e(once\).)282 1038 y(6.)39 b(Extra)21 b(credit)g(\(10\045\):)31
b(The)22 b(Nac)o(hos)f(disk)f(ma)o(y)f(b)q(e)i(corrupted)i(if)c(the)j
(system)365 1088 y(do)q(es)17 b(not)f(exit)g(cleanly)g(\(e.g.,)f(after)
i(a)f(crash)g(due)h(to)f(a)g(soft)o(w)o(are)g(bug)g(or)g(if)f(y)o(ou)
365 1137 y(exit)h(from)f(gdb)h(without)g(\014nishing)f(the)i
(program\).)23 b(This)16 b(is)g(b)q(ecause)i(some)e(\014le)365
1187 y(system)10 b(op)q(erations)h(require)g(more)f(than)g(one)h(ph)o
(ysical)e(disk)i(write.)17 b(One)11 b(example)365 1237
y(is)j(creating)h(a)f(new)h(\014le,)f(whic)o(h)g(requires)i(writing)d
(a)h(new)h(FileHeader)g(to)f(disk)h(as)365 1287 y(w)o(ell)10
b(as)h(up)q(dating)e(the)i(directory)h(and)e(the)h(bit)f(map)f(of)h
(free)h(blo)q(c)o(ks.)17 b(If)10 b(the)h(system)365 1337
y(crashes)k(after)e(ha)o(ving)f(done)h(some)f(but)h(not)g(all)e(of)i
(these)h(up)q(dates,)f(the)h(disk)f(ma)o(y)365 1386 y(b)q(e)k(in)f(an)g
(inconsisten)o(t)h(state.)25 b(F)m(or)16 b(extra)h(credit,)g(design)f
(reliabilit)o(y)e(in)o(to)i(y)o(our)365 1436 y(\014le)e(system.)365
1503 y(Y)m(ou)j(can)g(address)h(this)f(in)g(one)g(of)g(t)o(w)o(o)f(w)o
(a)o(ys.)27 b(One)18 b(approac)o(h)f(is)g(to)g(log)f(when)365
1553 y(y)o(ou)g(b)q(egin)g(and)g(\014nish)g(a)g(sequence)j(of)c
(logically)f(atomic)g(writes)j(\(cf.)26 b(the)16 b(Gra)o(y)365
1602 y(article\).)i(Another)c(is)g(to)f(structure)i(the)f(\014le)g
(system)f(so)g(that)g(eac)o(h)h(up)q(date)g(tak)o(es)365
1652 y(e\013ect)21 b(with)e(the)g(write)h(of)e(a)h(single)f(disk)h(blo)
q(c)o(k.)33 b(F)m(or)19 b(instance,)h(to)f(mo)q(dify)e(a)365
1702 y(\014le,)k(y)o(ou)e(can)g(write)h(the)g(mo)q(di\014cations)e(to)h
(new)h(disk)f(blo)q(c)o(ks,)h(o)o(v)o(erwrite)g(the)365
1752 y(FileHeader)15 b(to)f(p)q(oin)o(t)g(to)g(those)h(blo)q(c)o(ks,)e
(and)h(then)h(put)f(the)h(old)f(blo)q(c)o(ks)g(bac)o(k)g(on)365
1802 y(the)h(free)h(list.)j(Note)c(that)g(the)g(free)g(list)f(ma)o(y)f
(b)q(e)i(redundan)o(t;)g(it)f(ma)o(y)e(b)q(e)k(able)e(to)365
1851 y(b)q(e)h(reconstructed)i(after)d(a)f(crash)i(from)d(the)j(other)f
(data)g(on)f(the)i(disk.)365 1918 y(If)e(it)g(helps,)g(y)o(ou)f(ma)o(y)
f(assume)i(\(somewhat)f(unrealistically\))g(that)h(crashes)i(o)q(ccur)
365 1968 y(either)h(b)q(efore)g(or)f(after,)h(but)f(not)g(during)g
(disk)g(writes.)23 b(In)15 b(other)h(w)o(ords,)f(a)g(disk)365
2017 y(sector)i(will)c(con)o(tain)i(either)h(the)g(old)e(v)n(alue)h(or)
g(the)h(new)f(v)n(alue,)g(but)g(not)g(part)g(of)365 2067
y(eac)o(h.)365 2134 y(F)m(or)10 b(this)h(part,)g(y)o(ou)f(should)g
(test)h(y)o(our)g(system)f(b)o(y)g(crashing)h(it)f(at)g(an)g(inopp)q
(ortune)365 2183 y(p)q(oin)o(t)k(\(eg,)h(in)f(the)h(middle)d(of)i(a)h
(directory)g(up)q(date\),)g(and)f(then)h(reconstruct)i(the)365
2233 y(disk)d(after)g(the)h(crash.)967 2574 y(4)p eop
%%Trailer
end
userdict /end-hook known{end-hook}if
%%EOF
